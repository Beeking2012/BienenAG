<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienenprojekt-Website</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav {
      background-color: #f2c94c;
      padding: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
      font-weight: bold;
    }
    nav span {
      cursor: pointer;
    }
    nav span:hover {
      text-decoration: underline;
    }
    .page {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    h2 {
      color: #333;
    }
		.event-container {
	  display: flex;
	  flex-wrap: wrap;
	  gap: 20px;
	  justify-content: space-around;
	  margin-top: 10px;
	}

	.event-card {
	  background-color: #fff8dc;
	  border-radius: 10px;
	  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
	  width: 300px;
	  overflow: hidden;
	  transition: transform 0.2s ease;
	}

	.event-card:hover {
	  transform: scale(1.02);
	}

	.event-card img {
	  width: 100%;
	  height: 160px;
	  object-fit: cover;
	}

	.event-info {
	  padding: 10px 15px;
	}

	.event-info strong {
	  display: block;
	  margin-bottom: 5px;
	  font-size: 1rem;
	  color: #333;
	}

	.event-info p {
	  margin: 0;
	  font-size: 0.95rem;
	  color: #444;
	}

  </style>
</head>
<body>

  <nav>
    <span onclick="showPage('start')">Startseite</span>
    <span onclick="showPage('forschung')">Forschung</span>
    <span onclick="showPage('honigabgabe')">Honigabgabe</span>
    <span onclick="showPage('news')">News</span>
    <span onclick="showPage('galerie')">Galerie</span>
    <span onclick="showPage('downloads')">Downloads</span>
  </nav>

  <!-- Startseite -->
  <div id="start" class="page active">
    <h2>Startseite</h2>
	<section class="intro-section">
  <img src="bilder/Gruppenbild.jpg" alt="Unser Bienenstock" class="intro-image" weight=2000, height =300>
  <p class="intro-text">
    Willkommen bei der Bienen-AG der RPTU Kaiserslautern

Die Bienen-AG widmet sich mit Leidenschaft der Haltung und Pflege mehrerer Bienenv√∂lker auf dem Campus der RPTU. Mit regelm√§√üiger Betreuung, fachkundigem Austausch und viel Engagement schaffen wir einen Raum, in dem Mensch und Biene einander n√§herkommen.

Ob Honigernte, praktische Einblicke in die Imkerei oder besondere Aktionen rund um das Bienenjahr ‚Äì hier findet ihr alle aktuellen Informationen und Eindr√ºcke rund um unsere Arbeit mit den Bienen.

Mitmachen erw√ºnscht!
Du interessierst dich f√ºr Bienen, Nachhaltigkeit oder m√∂chtest einfach mal bei einem Besuch am Bienenstand dabei sein? Dann sprich uns an ‚Äì ob spontan, regelm√§√üig oder einfach nur neugierig: Jede helfende Hand ist willkommen!

  </p>
</section>

    <section>      
  <h3>Aktuelles</h3>
  <div class="event-container">
    <div class="event-card">
      <img src="bilder/honigernte.jpg" alt="Honigernte">
      <div class="event-info">
        <strong>Jeden Donnerstag - Treffen im Fachbereichsgarten</strong>
        <p>Unsere Ag trifft sich jeden Donnerstag um 8 Uhr im Fachbereichsgarten der RPTU zur gemeinsamen Pflege der Bienenv√∂lker. 
		Die Treffen dauern meistens 1h bis 1,5h. 
		Dabei werden die Bienenv√∂lker durchgesehen, um Schwarmverhalten und Krankheiten vorzubeugen. Auch werden bei bedarf Ableger gemacht.
		Ein weiteres Augenmerk liegt auf dem Honigeintrag, um Termine f√ºr Honigernten absch√§tzen zu k√∂nnen. 
		Neue Gesichter und Besucher sind jederzeit Willkommen.
		Vorwissen ist nicht n√∂tig.</p>
      </div>
    </div>
    <div class="event-card">
      <img src="bilder/treffen.jpg" alt="Treffen">
      <div class="event-info">
        <strong>28. Juli 2025 ‚Äì Honigabgabe</strong>
        <p>Am  um Uhr geben wir unseren Honig ab (Spenden sind willkommen). 
		Da wir eine AG sind d√ºrfen wir nichts Verkaufen, und finanzieren das Projekt √ºber Spenden.
		Der √ºbliche Honigpreis des Deutschen Imkerbundes liegt bei 7,50‚Ç¨ f√ºr 500g Honig.
		Bei unserem Honig handelt es sich um ein gemisch aus Fr√ºhjahrstracht und Sommertracht mit einer Note Waldtracht.
		Der Geschmack ist s√º√ü mit einer leicht w√ºrzigen Note. Ideal zum Kochen, f√ºr in Tee oder einfach als Brotaufstrich.  
		</p>
      </div>
    </div>
    <div class="event-card">
      <img src="bilder\abgabe.jpg" alt="Honigabgabe">
      <div class="event-info">
        <strong>31. Juli 2025 ‚ÄìHonigernte</strong>
        <p>Am  um 8 Uhr findet statt der √ºblichen Bienen-AG eine Honigernte statt. Genaueres wird wie immer bei den AG treffen bekannt gegeben.</p>
      </div>
    </div>
    <div class="event-card">
      <img src="bilder\abgabe.jpg" alt="Honigabgabe">
      <div class="event-info">
        <strong>31. Juli 2025 ‚ÄìHonigernte</strong>
        <p>Am  um 8 Uhr findet statt der √ºblichen Bienen-AG eine Honigernte statt. Genaueres wird wie immer bei den AG treffen bekannt gegeben.</p>
      </div>
    </div>
  </div>
  
</section>

    </section>
    <section>
      <h3>Die Bienen-AG</h3>
      <p>Die Bienen-AG der RPTU Kaiserslautern wird vom Lehrstuhl f√ºr Bioverfahrenstechnik getragen und fachlich betreut. Seit ihrer Gr√ºndung im Jahr 2013 k√ºmmert sich die AG verantwortungsvoll um mehrere Bienenv√∂lker auf dem Campus der Universit√§t.

Das Team besteht aus etwa zehn engagierten Mitgliedern, die aus verschiedenen Fachrichtungen stammen. Gemeinsam pflegen sie die Bienenv√∂lker, bilden Ableger, ernten Honig sowie sch√ºtzen die Bienen vor Krankheiten und verhindern Schw√§rme.

Ziel der AG ist es, das Bewusstsein f√ºr die √∂kologische Bedeutung von Honigbienen zu st√§rken und die Imkerei praxisnah und fundiert zu vermitteln.

Neben der klassischen Imkerei stehen Wissensvermittlung, Teamarbeit und nachhaltiges Engagement im Fokus. Die AG versteht sich als fachlich fundierte und zugleich offene Gemeinschaft ‚Äì sei es bei der Honigernte, der Bienengesundheit oder im Austausch mit Interessierten.</p>
    </section>
    <section>
      <h3>Honig</h3>
      <p>Bei der Honigernte der Bienen-AG halten wir uns selbstverst√§ndlich an alle gesetzlichen Vorgaben sowie die Qualit√§tsstandards des Deutschen Imkerbundes (DIB).

Unser Honig ist ein ausgewogenes Gemisch aus Fr√ºhjahrstracht und Sommertracht, erg√§nzt durch eine feine Note von Waldtracht.

Der Geschmack ist s√º√ü mit einer leicht w√ºrzigen Note ‚Äì ideal zum Kochen, f√ºr Tee oder einfach als Brotaufstrich.

Wir bieten unseren Honig sowohl in fl√ºssiger Form als auch cremig ger√ºhrt an, sodass f√ºr jeden Geschmack und Verwendungszweck etwas dabei ist.

Die Gewinnung unseres Honigs erfolgt traditionell und mit gro√üer Sorgfalt: Zun√§chst setzen wir Bienenfluchten ein, um die Bienen aus den Honigwaben schonend zu entfernen, ohne die Tiere zu verletzen. Danach werden die Waben entdeckelt, das hei√üt, die d√ºnne Wachsschicht, die die Honigzellen verschlie√üt, wird vorsichtig entfernt, um den Honig freizulegen. Anschlie√üend wird der Honig durch Schleudern aus den Waben extrahiert, wobei die Waben intakt bleiben und erneut genutzt werden k√∂nnen. Abschlie√üend wird der Honig durch Sieben von Wachsteilchen, Pollenresten und anderen Verunreinigungen befreit, um ein reines und klares Produkt zu gew√§hrleisten.

Die Honigernte erfolgt so schonend und verantwortungsvoll, dass die Bienenv√∂lker bestm√∂glich gesch√ºtzt und die nat√ºrliche Qualit√§t des Honigs erhalten bleiben.</p>
    </section>
  </div>

<!-- Forschung -->
<div id="forschung" class="page">
  <h2>Forschung</h2>
  <p>
    Im Rahmen unserer Bienen-AG analysieren wir umfangreiche Sensordaten, die wir mittels modernster IoT-Technologie
    direkt aus unseren Bienenv√∂lkern erfassen. Zu den erfassten Parametern geh√∂ren:
  </p>
  <ul>
    <li>Temperatur an verschiedenen Messstellen im Bienenstock</li>
    <li>Luftfeuchtigkeit und Luftdruck</li>
    <li>Gewichtsentwicklung des gesamten Stocks</li>
    <li>Akustische Signale (Summverhalten, Schallpegel)</li>
  </ul>
  <p>
    Diese Daten liefern uns detaillierte Einblicke in das Verhalten und die Gesundheit der Bienen √ºber den Jahresverlauf.
    Durch die kontinuierliche √úberwachung lassen sich Schwankungen im Stockzustand fr√ºhzeitig erkennen und R√ºckschl√ºsse auf
    Schwarmverhalten, Honigeintrag oder m√∂gliche Krankheitsanzeichen ziehen.
  </p>
  <p>
    Die Datenvisualisierung erfolgt in interaktiven Diagrammen, mit denen Trends und Anomalien zeitlich aufgel√∂st
    und Zusammenh√§nge besser verstanden werden k√∂nnen.
  </p>
  <p>
    Diese umfassende Datengrundlage er√∂ffnet vielf√§ltige M√∂glichkeiten f√ºr wissenschaftliche Auswertungen und praktische Anwendungen ‚Äì
    von der Optimierung der Bienenzucht bis hin zur Entwicklung neuer Methoden zur Bienengesundheit.
  </p>
  <p>
    Unsere Sensordaten sind damit eine wertvolle Ressource f√ºr alle, die sich mit Bienenforschung oder angewandter
    Bioverfahrenstechnik besch√§ftigen.
  </p>
  <p><strong>
    F√ºr Forschende, Studierende und Projektgruppen, die an einer Nutzung unserer Sensordaten f√ºr wissenschaftliche Arbeiten,
    Abschlussarbeiten oder Projektarbeiten interessiert sind, stehen wir gerne als Ansprechpartner zur Verf√ºgung ‚Äì
    kontaktieren Sie uns bei Interesse!
  </strong></p>
</section>


  <div style="margin-top: 20px;">
    <span style="cursor: pointer; text-decoration: underline; color: #0077cc;" onclick="zeigeForschung('livedaten')">üìä Livedaten der Bienenv√∂lker</span> |
    <span style="cursor: pointer; text-decoration: underline; color: #0077cc;" onclick="zeigeForschung('ergebnisse')">üìÑ Forschungsergebnisse</span>
  </div>
  <!-- Bereich: Livedaten -->
  <div id="livedaten" style="margin-top: 20px; display: none;">
    <h3>Livedaten</h3>
     <h2>Forschung und Technik</h2>
  <p>
    Die Bienen-AG der RPTU Kaiserslautern verbindet traditionelle Imkerei mit moderner Sensorik und Datenanalyse, 
    um den Zustand und das Verhalten ihrer Bienenv√∂lker wissenschaftlich zu beobachten und nachhaltig zu f√∂rdern.
  </p>

  <h3>Erfasste Daten und Sensorik</h3>
  <p>Wir messen kontinuierlich verschiedene Parameter direkt im Bienenstock mit einem Netzwerk aus Sensoren:</p>
  <ul>
    <li><strong>Temperatur:</strong> Mehrere DS18B20-Sensoren √ºberwachen die Temperatur an verschiedenen Positionen, um die optimalen Brutnestbedingungen pr√§zise zu erfassen.</li>
    <li><strong>Luftfeuchtigkeit und Luftdruck:</strong> Ein AHT21-Sensor erfasst Luftfeuchtigkeit und Temperatur, w√§hrend ein BMP280-Sensor den Luftdruck misst. Diese Umgebungsfaktoren beeinflussen das Bienenverhalten ma√ügeblich.</li>
    <li><strong>Gewicht:</strong> Eine hochpr√§zise W√§gezelle (HX711) registriert das Gesamtgewicht des Stocks, was R√ºckschl√ºsse auf Honigertrag, Schwarmverhalten und m√∂gliche Verluste erlaubt.</li>
    <li><strong>Akustik:</strong> Ein Mikrofonmodul zeichnet die Summt√∂ne der Bienen auf. Die Analyse der akustischen Signale liefert Hinweise auf Stress, Schwarmstimmung oder Krankheiten.</li>
  </ul>
  <p>
    Alle Sensoren sind an einen Mikrocontroller (ESP32) angeschlossen, der die Daten in Echtzeit sammelt 
    und per WLAN an eine Cloud-Datenbank (Firebase Realtime Database) √ºbertr√§gt.
  </p>

  <h3>M√∂glichkeiten und Nutzen der Datenanalyse</h3>
  <ul>
    <li><strong>Fr√ºherkennung von Krankheiten und Schw√§rmen:</strong> Ungew√∂hnliche Ver√§nderungen in Temperatur, Gewicht oder Akustik werden fr√ºhzeitig erkannt, sodass gezielte Ma√ünahmen m√∂glich sind.</li>
    <li><strong>Optimierung der Bienenpflege:</strong> Die Daten unterst√ºtzen eine gezielte Pflege und Behandlung, z.&nbsp;B. durch angepasste F√ºtterung und Kontrolle der Brutentwicklung.</li>
    <li><strong>Verbesserung der Honigernte:</strong> Gewichtsentwicklungen zeigen den optimalen Zeitpunkt f√ºr die Honigernte an, was Verluste minimiert und die Qualit√§t verbessert.</li>
    <li><strong>Wissenschaftliche Forschung:</strong> Die Daten bieten eine wertvolle Grundlage f√ºr das Verst√§ndnis der Bienenbiologie und -√∂kologie sowie f√ºr die Entwicklung praxisnaher Imkereimethoden.</li>
    <li><strong>Bildung und √ñffentlichkeitsarbeit:</strong> Die Visualisierung der Daten in interaktiven Diagrammen auf unserer Webseite schafft Transparenz und f√∂rdert das Bewusstsein f√ºr Bienen und Umweltschutz.</li>
  </ul>

  <h3>Datenvisualisierung</h3>
  <p>
    Die gesammelten Daten werden mit der Bibliothek <em>Chart.js</em> in dynamischen, interaktiven Diagrammen auf unserer Webseite dargestellt. 
    Nutzer k√∂nnen zwischen verschiedenen Anzeige-Modi w√§hlen, um die Entwicklung des Bienenstocks im Detail oder im Langzeitvergleich zu verfolgen.
  </p>

  <p>
    F√ºr Forschende, Studierende und Projektgruppen, die an einer Nutzung unserer Sensordaten f√ºr wissenschaftliche Arbeiten, Abschlussarbeiten oder Projektarbeiten interessiert sind, 
    stehen wir gerne als Ansprechpartner zur Verf√ºgung ‚Äì <strong>kontaktieren Sie uns bei Interesse!</strong>
  </p>
	<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StockWatch Dashboard - Livedaten</title>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <!-- Chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 1rem 2rem;
    }

    h1 {
      background: #ffd700;
      margin: 0 0 1rem 0;
      padding: 1rem 2rem;
      font-size: 1.5rem;
      color: #333;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
    }

    label {
      display: block;
      margin-top: 1rem;
      text-align: center;
      font-weight: bold;
    }

    select {
      font-size: 1rem;
      padding: 0.4rem 0.8rem;
      margin: 0.5rem auto 1rem auto;
      display: block;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .container {
      padding-bottom: 3rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
    }

    .chart-box {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 1rem;
    }

    .chart-box canvas {
      width: 100% !important;
      height: 280px !important;
    }
  </style>
</head>
<body>

  <h1>StockWatch Dashboard - Livedaten</h1>

  <label for="mode">Diagramm-Modus:</label>
  <select id="mode">
    <option value="normal" selected>Normal</option>
    <option value="last10">Letzte 10 Messpunkte</option>
    <option value="logtime">Halblogarithmisch (Zeit)</option>
  </select>

  <div class="container">
    <div class="chart-box"><canvas id="tempAChart"></canvas></div>
    <div class="chart-box"><canvas id="tempBChart"></canvas></div>
    <div class="chart-box"><canvas id="tempCChart"></canvas></div>
    <div class="chart-box"><canvas id="tempDChart"></canvas></div>
    <div class="chart-box"><canvas id="avgTempChart"></canvas></div>
    <div class="chart-box"><canvas id="newton"></canvas></div>
    <div class="chart-box"><canvas id="schall"></canvas></div>
    <div class="chart-box"><canvas id="feuchte"></canvas></div>
    <div class="chart-box"><canvas id="druck"></canvas></div>
  </div>

  <script>
    // Firebase Konfiguration
    firebase.initializeApp({
      apiKey: "AIzaSyB8-ULvYODCZPrtgLFJcxfKAgY4icJ-HY4",
      authDomain: "beehive10024.firebaseapp.com",
      databaseURL: "https://beehive10024-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "beehive10024",
      storageBucket: "beehive10024.appspot.com",
      messagingSenderId: "1012726020545",
      appId: "1:1012726020545:web:714cf4f370a7fa9fe3d740"
    });

    const database = firebase.database();
    const auth = firebase.auth();

    const tempA = [], tempB = [], tempC = [], tempD = [], avgs = [];
    const weights = [], wave = [], relative = [], pressure = [], timestamps = [];

    let selectedMode = "normal";

    // Dropdown-Moduswechsel
    document.getElementById("mode").addEventListener("change", e => {
      selectedMode = e.target.value;
      drawCharts();
    });

    // Anonyme Authentifizierung
    firebase.auth().signInAnonymously().catch(error => {
      console.error("Auth failed:", error);
      location.reload();
    });

    // Daten aus Firebase abrufen
    auth.onAuthStateChanged(user => {
      if (user) {
        const dbRef = database.ref("Hive01/");
        let firstDataLoaded = false;

        dbRef.orderByKey().limitToLast(3000).on('child_added', snapshot => {
          const data = snapshot.val();

          if (Number(data.Pascal) > 100 && Number(data.Weight) > 0) {
            const date = new Date(data.time * 1000);
            timestamps.push(date.toLocaleDateString("de-DE") + " " + date.toLocaleTimeString("de-DE"));

            const TA = Number(data.Sensor0);
            const TB = Number(data.Sensor1);
            const TC = Number(data.AHTTemp);
            const TD = Number(data.BMPTemp);
            const avg = (TA + TB + TC + TD) / 4;

            tempA.push(TA);
            tempB.push(TB);
            tempC.push(TC);
            tempD.push(TD);
            avgs.push(avg);

            weights.push(Number(data.Weight));
            wave.push(Number(data.Sound));
            relative.push(Number(data.Relative));
            pressure.push(Number(data.Pascal));

            if (!firstDataLoaded && timestamps.length > 5) {
              firstDataLoaded = true;
              drawCharts();
            }
          }
        });

        // Charts alle 5 Sekunden neu zeichnen (bei vorhandenen Daten)
        setInterval(() => {
          if (timestamps.length > 5) {
            drawCharts();
          }
        }, 5000);
      }
    });

    // Modusbasierte Filterung der Daten f√ºr die Diagramme
    function getModeFiltered(data, labels) {
      if (selectedMode === "last10") {
        return {
          data: data.slice(-10),
          labels: labels.slice(-10)
        };
      } else if (selectedMode === "logtime") {
        const steps = Math.min(60, data.length);
        const resultData = [], resultLabels = [];
        for (let i = 0; i < steps; i++) {
          const idx = Math.floor(Math.pow(i / steps, 2) * (data.length - 1));
          resultData.push(data[idx]);
          resultLabels.push(labels[idx]);
        }
        return { data: resultData, labels: resultLabels };
      } else {
        return { data, labels };
      }
    }

    // Alle Diagramme zeichnen
    function drawCharts() {
      console.log("üîÑ drawCharts() triggered ‚Äî Mode:", selectedMode);

      const chartConfigs = [
        { id: "tempAChart", label: "F√ºhler 0 (¬∞C)", data: tempA, color: "red" },
        { id: "tempBChart", label: "F√ºhler 1 (¬∞C)", data: tempB, color: "green" },
        { id: "tempCChart", label: "Sonde T0 (¬∞C)", data: tempC, color: "blue" },
        { id: "tempDChart", label: "Sonde T1 (¬∞C)", data: tempD, color: "orange" },
        { id: "avgTempChart", label: "Durchschnitt (¬∞C)", data: avgs, color: "gray" },
        { id: "newton", label: "Gewicht (kg)", data: weights, color: "green" },
        { id: "schall", label: "Schalldruck", data: wave, color: "gold" },
        { id: "feuchte", label: "Luftfeuchtigkeit (%Rel)", data: relative, color: "navy" },
        { id: "druck", label: "Luftdruck (Pa)", data: pressure, color: "lime" }
      ];

      chartConfigs.forEach(({ id, label, data, color }) => {
        if (window[id + "ChartInstance"]) {
          window[id + "ChartInstance"].destroy();
        }

        const filtered = getModeFiltered(data, timestamps);
        const ctx = document.getElementById(id).getContext('2d');

        window[id + "ChartInstance"] = new Chart(ctx, {
          type: "line",
          data: {
            labels: filtered.labels,
            datasets: [{
              label,
              data: filtered.data,
              borderColor: color,
              backgroundColor: "transparent",
              fill: false,
              pointRadius: 0,
              borderWidth: 2
            }]
          },
          options: {
            animation: false,
            responsive: true,
            maintainAspectRatio: false,
            legend: { display: true },
            scales: {
              xAxes: [{
                ticks: {
                  maxRotation: 45,
                  minRotation: 30,
                  autoSkip: true,
                  maxTicksLimit: 20
                },
                gridLines: { display: false }
              }],
              yAxes: [{
                ticks: { beginAtZero: false },
                gridLines: { drawBorder: false }
              }]
            },
            tooltips: {
              mode: 'index',
              intersect: false
            },
            hover: {
              mode: 'nearest',
              intersect: true
            }
          }
        });
      });
    }
  </script>
</body>
  </div>
  
 

  <!-- Bereich: Forschungsergebnisse -->
  <div id="ergebnisse" style="margin-top: 20px; display: none;">
    <h3>Forschungsergebnisse</h3>
    <p>In diesem Abschnitt ver√∂ffentlichen wir unsere wissenschaftlichen Auswertungen und Resultate.</p>
<!-- Firebase & XLSX Bibliotheken -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<script>
  // Firebase-Konfiguration
  firebase.initializeApp({
    apiKey: "AIzaSyB8-ULvYODCZPrtgLFJcxfKAgY4icJ-HY4",
    authDomain: "beehive10024.firebaseapp.com",
    databaseURL: "https://beehive10024-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "beehive10024",
    storageBucket: "beehive10024.appspot.com",
    messagingSenderId: "1012726020545",
    appId: "1:1012726020545:web:714cf4f370a7fa9fe3d740"
  });

  let sensorData = {};

  // Zeitstempel in lesbares Format umwandeln
  function format(ts) {
    const d = new Date(Number(ts) * 1000);
    return isNaN(d.getTime()) ? ts : d.toLocaleString("de-DE");
  }

  // Excel-Exportfunktion
  function exportToExcel() {
    if (!sensorData || Object.keys(sensorData).length === 0) {
      alert("‚ö†Ô∏è Keine Daten zum Exportieren.");
      return;
    }

    const wb = XLSX.utils.book_new();
    const keys = {
      AHTTemp: "Temperatur (AHT)",
      BMPTemp: "Temperatur (BMP)",
      Sensor0: "Sensor 0",
      Sensor1: "Sensor 1",
      Weight: "Gewicht",
      Relative: "Luftfeuchtigkeit",
      Pascal: "Luftdruck",
      Sound: "Schall",
      Signal_RSSI: "Signalst√§rke"
    };

    for (const [key, label] of Object.entries(keys)) {
      const sheet = [["Zeit", label]];
      Object.entries(sensorData).forEach(([ts, entry]) => {
        if (ts === "0") return;
        sheet.push([format(ts), entry[key] ?? ""]);
      });
      const ws = XLSX.utils.aoa_to_sheet(sheet);
      XLSX.utils.book_append_sheet(wb, ws, label.slice(0, 31));
    }

    XLSX.writeFile(wb, "BienenAG_Sensordaten.xlsx");
  }

  // Firebase-Daten laden nach anonymer Anmeldung
  firebase.auth().signInAnonymously()
    .then(() => firebase.database().ref("Hive01").once("value"))
    .then(snapshot => {
      sensorData = snapshot.val() || {};
      document.getElementById("exportBtn").disabled = false;
    })
    .catch(err => {
      console.error("Fehler beim Laden der Daten:", err);
      alert("Fehler beim Zugriff auf die Sensordaten.");
    });

  // Button-Klick zum Export starten
  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("exportBtn").addEventListener("click", exportToExcel);
  });
</script>
<button id="exportBtn" disabled>üì• Sensordaten als Excel herunterladen</button>



  </div>
</div>

  <!-- Honigabgabe -->
  <div id="honigabgabe" class="page">
    <h2>Honigabgabe</h2>
    <p>Hier ver√∂ffentlichen wir Informationen zu unserem Honig und wann er wo erh√§ltlich sein wird. Bis genaue Termine bekannt sind bitte Aktuelles beachten.</p>
  </div>

  <!-- News -->
  <div id="news" class="page">
    <h2>News</h2>
    <p>Alle aktuellen Ereignisse und Ank√ºndigungen.</p>
	    <section>      
  <h3>Aktuelles</h3>
  <div class="event-container">
    <div class="event-card">
      <img src="bilder/honigernte.jpg" alt="Honigernte">
      <div class="event-info">
        <strong>Jeden Donnerstag - Treffen im Fachbereichsgarten</strong>
        <p>Unsere Ag trifft sich jeden Donnerstag um 8 Uhr im Fachbereichsgarten der RPTU zur gemeinsamen Pflege der Bienenv√∂lker. 
		Die Treffen dauern meistens 1h bis 1,5h. 
		Dabei werden die Bienenv√∂lker durchgesehen, um Schwarmverhalten und Krankheiten vorzubeugen. Auch werden bei bedarf Ableger gemacht.
		Ein weiteres Augenmerk liegt auf dem Honigeintrag, um Termine f√ºr Honigernten absch√§tzen zu k√∂nnen. 
		Neue Gesichter und Besucher sind jederzeit Willkommen.
		Vorwissen ist nicht n√∂tig.</p>
      </div>
    </div>
    <div class="event-card">
      <img src="bilder/treffen.jpg" alt="Treffen">
      <div class="event-info">
        <strong>28. Juli 2025 ‚Äì Honigabgabe</strong>
        <p>Am  um Uhr geben wir unseren Honig ab (Spenden sind willkommen). 
		Da wir eine AG sind d√ºrfen wir nichts Verkaufen, und finanzieren das Projekt √ºber Spenden.
		Der √ºbliche Honigpreis des Deutschen Imkerbundes liegt bei 7,50‚Ç¨ f√ºr 500g Honig.
		Bei unserem Honig handelt es sich um ein gemisch aus Fr√ºhjahrstracht und Sommertracht mit einer Note Waldtracht.
		Der Geschmack ist s√º√ü mit einer leicht w√ºrzigen Note. Ideal zum Kochen, f√ºr in Tee oder einfach als Brotaufstrich.  
		</p>
      </div>
    </div>
    <div class="event-card">
      <img src="bilder\abgabe.jpg" alt="Honigabgabe">
      <div class="event-info">
        <strong>31. Juli 2025 ‚ÄìHonigernte</strong>
        <p>Am  um 8 Uhr findet statt der √ºblichen Bienen-AG eine Honigernte statt. Genaueres wird wie immer bei den AG treffen bekannt gegeben.</p>
      </div>
    </div>
    <div class="event-card">
      <img src="bilder\abgabe.jpg" alt="Honigabgabe">
      <div class="event-info">
        <strong>31. Juli 2025 ‚ÄìHonigernte</strong>
        <p>Am  um 8 Uhr findet statt der √ºblichen Bienen-AG eine Honigernte statt. Genaueres wird wie immer bei den AG treffen bekannt gegeben.</p>
      </div>
    </div>
  </div>
  
</section>

    </section>
  </div>

  <!-- Galerie -->
  <div id="galerie" class="page">
    <h2>Galerie</h2>
    <p>Bilder und Eindr√ºcke aus unserem Projekt.</p>
  </div>

  <!-- Downloads -->
  <div id="downloads" class="page">
    <h2>Downloads</h2>
    <p>Wichtige Dokumente und Dateien zum Herunterladen.</p>
	  </p>
  <ul>
    <li>1. Beispiellink</li>
    <li>2. Beispiellink</li>
    <li>Gewichtsentwicklung des gesamten Stocks</li>
  </ul>
  <p>
  <ul>
  <p>N√§chste Sub√ºberschrift</p>
  <li>3.Beispiellink</li>
  <li>4. Beispiellink</li>
  </ul>
  


	
  </div>

  <script>
    function showPage(pageId) {
      const pages = document.querySelectorAll('.page');
      pages.forEach(page => page.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
    }
	function zeigeForschung(id) {
  document.getElementById('livedaten').style.display = (id === 'livedaten') ? 'block' : 'none';
  document.getElementById('ergebnisse').style.display = (id === 'ergebnisse') ? 'block' : 'none';
}
  </script>

</body>
</html>
